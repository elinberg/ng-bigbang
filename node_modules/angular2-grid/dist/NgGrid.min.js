System.register(["angular2/core"],function(t){var i,e,s,r,n=this&&this.__decorate||function(t,i,e,s){var r,n=arguments.length,o=3>n?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,e,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(o=(3>n?r(o):n>3?r(i,e,o):r(i,e))||o);return n>3&&o&&Object.defineProperty(i,e,o),o},o=this&&this.__metadata||function(t,i){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(t,i):void 0};return{setters:[function(t){i=t}],execute:function(){e=function(){function t(e,s,r,n){this._differs=e,this._ngEl=s,this._renderer=r,this._loader=n,this.dragStart=new i.EventEmitter,this.drag=new i.EventEmitter,this.dragStop=new i.EventEmitter,this.resizeStart=new i.EventEmitter,this.resize=new i.EventEmitter,this.resizeStop=new i.EventEmitter,this.colWidth=250,this.rowHeight=250,this.minCols=1,this.minRows=1,this.marginTop=10,this.marginRight=10,this.marginBottom=10,this.marginLeft=10,this.isDragging=!1,this.isResizing=!1,this.autoStyle=!0,this.resizeEnable=!0,this.dragEnable=!0,this.cascade="up",this._items=[],this._draggingItem=null,this._resizingItem=null,this._resizeDirection=null,this._itemGrid={1:{1:null}},this._maxCols=0,this._maxRows=0,this._minWidth=100,this._minHeight=100,this._setWidth=250,this._setHeight=250,this._posOffset=null,this._adding=!1,this._placeholderRef=null,this._fixToGrid=!1,this._autoResize=!1,this._config=t.CONST_DEFAULT_CONFIG}return Object.defineProperty(t.prototype,"config",{set:function(t){this._config=t,null==this._differ&&null!=t&&(this._differ=this._differs.find(this._config).create(null)),this.setConfig(this._config)},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this._renderer.setElementClass(this._ngEl,"grid",!0),this.autoStyle&&this._renderer.setElementStyle(this._ngEl,"position","relative"),this.setConfig(this._config)},t.prototype.setConfig=function(t){var i=!1;for(var e in t){var s=t[e];switch(e){case"margins":this.setMargins(s);break;case"col_width":this.colWidth=parseInt(s);break;case"row_height":this.rowHeight=parseInt(s);break;case"auto_style":this.autoStyle=s?!0:!1;break;case"auto_resize":this._autoResize=s?!0:!1;break;case"draggable":this.dragEnable=s?!0:!1;break;case"resizable":this.resizeEnable=s?!0:!1;break;case"max_rows":i=i||this._maxRows!=parseInt(s),this._maxRows=parseInt(s);break;case"max_cols":i=i||this._maxCols!=parseInt(s),this._maxCols=parseInt(s);break;case"min_rows":this.minRows=Math.max(parseInt(s),1);break;case"min_cols":this.minCols=Math.max(parseInt(s),1);break;case"min_height":this._minHeight=parseInt(s);break;case"min_width":this._minWidth=parseInt(s);break;case"cascade":this.cascade!=s&&(this.cascade=s,this._cascadeGrid());break;case"fix_to_grid":this._fixToGrid=s?!0:!1}}if(i){if(this._maxCols>0&&this._maxRows>0)switch(this.cascade){case"left":case"right":this._maxCols=0;break;case"up":case"down":default:this._maxRows=0}for(var e in this._items){var r=this._items[e].getGridPosition(),n=this._items[e].getSize();if(this._removeFromGrid(this._items[e]),this._hasGridCollision(r,n)||!this._isWithinBounds(r,n)){var o=this._fixGridPosition(r,n);this._items[e].setGridPosition(o.col,o.row)}this._addToGrid(this._items[e])}this._cascadeGrid()}if(this._autoResize&&this._maxCols>0){var h=this._ngEl.nativeElement.getBoundingClientRect().width,a=Math.floor(h/this._maxCols);a-=this.marginLeft+this.marginRight,a>0&&(this.colWidth=a)}else if(this._autoResize&&this._maxRows>0){var l=window.innerHeight,_=Math.floor(l/this._maxRows);_-=this.marginTop+this.marginBottom,_>0&&(this.rowHeight=_)}var h=this._maxCols*this.colWidth,l=this._maxRows*this.rowHeight;h>0&&this._minWidth>h&&(this._minWidth=.75*this.colWidth),l>0&&this._minHeight>l&&(this._minHeight=.75*this.rowHeight),this._minWidth>this.colWidth&&(this.minCols=Math.max(this.minCols,Math.ceil(this._minWidth/this.colWidth))),this._minHeight>this.rowHeight&&(this.minRows=Math.max(this.minRows,Math.ceil(this._minHeight/this.rowHeight))),this._maxCols>0&&this.minCols>this._maxCols&&(this.minCols=1),this._maxRows>0&&this.minRows>this._maxRows&&(this.minRows=1);for(var e in this._items)this._removeFromGrid(this._items[e]),this._items[e].recalculateSelf(),this._addToGrid(this._items[e]);this._cascadeGrid(),this._updateSize()},t.prototype.getItemPosition=function(t){return this._items[t].getGridPosition()},t.prototype.getItemSize=function(t){return this._items[t].getSize()},t.prototype.ngDoCheck=function(){if(null!=this._differ){var t=this._differ.diff(this._config);if(null!=t)return this._applyChanges(t),!0}return!1},t.prototype.setMargins=function(t){this.marginTop=parseInt(t[0]),this.marginRight=t.length>=2?parseInt(t[1]):this.marginTop,this.marginBottom=t.length>=3?parseInt(t[2]):this.marginTop,this.marginLeft=t.length>=4?parseInt(t[3]):this.marginRight},t.prototype.enableDrag=function(){this.dragEnable=!0},t.prototype.disableDrag=function(){this.dragEnable=!1},t.prototype.enableResize=function(){this.resizeEnable=!0},t.prototype.disableResize=function(){this.resizeEnable=!1},t.prototype.addItem=function(t){var i=this._fixGridPosition(t.getGridPosition(),t.getSize());t.setGridPosition(i.col,i.row),this._items.push(t),this._addToGrid(t),t.recalculateSelf()},t.prototype.removeItem=function(t){this._removeFromGrid(t);for(var i in this._items)this._items[i]==t&&this._items.splice(i,1);this._cascadeGrid(),this._updateSize(),this._items.forEach(function(t){return t.recalculateSelf()})},t.prototype._onResize=function(t){if(this._autoResize&&this._maxCols>0){var i=this._ngEl.nativeElement.getBoundingClientRect().width,e=Math.floor(i/this._maxCols);e-=this.marginLeft+this.marginRight,this.colWidth=e}else if(this._autoResize&&this._maxRows>0){var s=window.innerHeight,r=Math.floor(s/this._maxRows);r-=this.marginTop+this.marginBottom,this.rowHeight=r}for(var n in this._items)this._items[n].recalculateSelf();this._updateSize()},t.prototype._applyChanges=function(t){var i=this;t.forEachAddedItem(function(t){i._config[t.key]=t.currentValue}),t.forEachChangedItem(function(t){i._config[t.key]=t.currentValue}),t.forEachRemovedItem(function(t){delete i._config[t.key]}),this.setConfig(this._config)},t.prototype._onMouseDown=function(t){var i=this._getMousePosition(t),e=this._getItemFromPosition(i);if(null!=e){if(this.resizeEnable&&null!=e.canResize(t))return this._resizeStart(t),!1;if(this.dragEnable&&e.canDrag(t))return this._dragStart(t),!1}return!0},t.prototype._resizeStart=function(t){if(this.resizeEnable){var i=this._getMousePosition(t),e=this._getItemFromPosition(i);e.startMoving(),this._resizingItem=e,this._resizeDirection=e.canResize(t),this._removeFromGrid(e),this._createPlaceholder(e.getGridPosition(),e.getSize()),this.isResizing=!0,this.resizeStart.emit(e),e.resizeStart.emit(e.getEventOutput())}},t.prototype._dragStart=function(t){if(this.dragEnable){var i=this._getMousePosition(t),e=this._getItemFromPosition(i),s=e.getPosition(),r={left:i.left-s.left,top:i.top-s.top};e.startMoving(),this._draggingItem=e,this._posOffset=r,this._removeFromGrid(e),this._createPlaceholder(e.getGridPosition(),e.getSize()),this.isDragging=!0,this.dragStart.emit(e),e.dragStart.emit(e.getEventOutput())}},t.prototype._onMouseMove=function(t){if(0==t.buttons&&this.isDragging)this._dragStop(t);else if(0==t.buttons&&this.isResizing)this._resizeStop(t);else if(this.isDragging)this._drag(t);else if(this.isResizing)this._resize(t);else{var i=this._getMousePosition(t),e=this._getItemFromPosition(i);e&&e.onMouseMove(t)}},t.prototype._drag=function(t){if(this.isDragging){var i=this._getMousePosition(t),e=i.left-this._posOffset.left,s=i.top-this._posOffset.top,r=this._draggingItem.getGridPosition(),n=this._calculateGridPosition(e,s),o=this._draggingItem.getSize();this._isWithinBoundsX(n,o)||(n.col=this._maxCols-(o.x-1)),this._isWithinBoundsY(n,o)||(n.row=this._maxRows-(o.y-1)),(n.col!=r.col||n.row!=r.row)&&(this._draggingItem.setGridPosition(n.col,n.row),this._placeholderRef.instance.setGridPosition(n.col,n.row),["up","down","left","right"].indexOf(this.cascade)>=0&&(this._fixGridCollisions(n,o),this._cascadeGrid(n,o))),this._fixToGrid||this._draggingItem.setPosition(e,s),this.drag.emit(this._draggingItem),this._draggingItem.drag.emit(this._draggingItem.getEventOutput())}},t.prototype._resize=function(t){if(this.isResizing){var i=this._getMousePosition(t),e=this._resizingItem.getPosition(),s=this._resizingItem.getDimensions(),r="height"==this._resizeDirection?s.width:i.left-e.left+10,n="width"==this._resizeDirection?s.height:i.top-e.top+10;r<this._minWidth&&(r=this._minWidth),n<this._minHeight&&(n=this._minHeight);var o=this._calculateGridSize(r,n),h=this._resizingItem.getSize(),a=this._resizingItem.getGridPosition();this._isWithinBoundsX(a,o)||(o.x=this._maxCols-a.col+1),this._isWithinBoundsY(a,o)||(o.y=this._maxRows-a.row+1),(o.x!=h.x||o.y!=h.y)&&(this._resizingItem.setSize(o.x,o.y),this._placeholderRef.instance.setSize(o.x,o.y),["up","down","left","right"].indexOf(this.cascade)>=0&&(this._fixGridCollisions(a,o),this._cascadeGrid(a,o))),this._fixToGrid||this._resizingItem.setDimensions(r,n);var l=this._maxGridSize(e.left+r+2*t.movementX,e.top+n+2*t.movementY);"height"==this._resizeDirection&&(l.x=a.col+h.x),"width"==this._resizeDirection&&(l.y=a.row+h.y),this.resize.emit(this._resizingItem),this._resizingItem.resize.emit(this._resizingItem.getEventOutput())}},t.prototype._onMouseUp=function(t){return this.isDragging?(this._dragStop(t),!1):this.isResizing?(this._resizeStop(t),!1):!0},t.prototype._dragStop=function(t){if(this.isDragging){this.isDragging=!1;var i=this._draggingItem.getGridPosition();this._draggingItem.setGridPosition(i.col,i.row),this._addToGrid(this._draggingItem),this._cascadeGrid(),this._draggingItem.stopMoving(),this._draggingItem.dragStop.emit(this._draggingItem.getEventOutput()),this.dragStop.emit(this._draggingItem),this._draggingItem=null,this._posOffset=null,this._placeholderRef.dispose()}},t.prototype._resizeStop=function(t){if(this.isResizing){this.isResizing=!1;var i=this._resizingItem.getSize();this._resizingItem.setSize(i.x,i.y),this._addToGrid(this._resizingItem),this._cascadeGrid(),this._resizingItem.stopMoving(),this._resizingItem.resizeStop.emit(this._resizingItem.getEventOutput()),this.resizeStop.emit(this._resizingItem),this._resizingItem=null,this._resizeDirection=null,this._placeholderRef.dispose()}},t.prototype._maxGridSize=function(t,i){var e=Math.ceil(t/(this.colWidth+this.marginLeft+this.marginRight)),s=Math.ceil(i/(this.rowHeight+this.marginTop+this.marginBottom));return{x:e,y:s}},t.prototype._calculateGridSize=function(t,i){t+=this.marginLeft+this.marginRight,i+=this.marginTop+this.marginBottom;var e=Math.max(this.minCols,Math.round(t/(this.colWidth+this.marginLeft+this.marginRight))),s=Math.max(this.minRows,Math.round(i/(this.rowHeight+this.marginTop+this.marginBottom)));return this._isWithinBoundsX({col:1,row:1},{x:e,y:s})||(e=this._maxCols),this._isWithinBoundsY({col:1,row:1},{x:e,y:s})||(s=this._maxRows),{x:e,y:s}},t.prototype._calculateGridPosition=function(t,i){var e=Math.max(1,Math.round(t/(this.colWidth+this.marginLeft+this.marginRight))+1),s=Math.max(1,Math.round(i/(this.rowHeight+this.marginTop+this.marginBottom))+1);return this._isWithinBoundsX({col:e,row:s},{x:1,y:1})||(e=this._maxCols),this._isWithinBoundsY({col:e,row:s},{x:1,y:1})||(s=this._maxRows),{col:e,row:s}},t.prototype._hasGridCollision=function(t,i){var e=this._getCollisions(t,i);return null==e||0==e.length?!1:e.some(function(t){return!(null===t)})},t.prototype._getCollisions=function(t,i){for(var e=[],s=0;s<i.y;s++)if(null!=this._itemGrid[t.row+s])for(var r=0;r<i.x;r++)null!=this._itemGrid[t.row+s][t.col+r]&&e.push(this._itemGrid[t.row+s][t.col+r]);return e},t.prototype._fixGridCollisions=function(t,i){for(;this._hasGridCollision(t,i);){var e=this._getCollisions(t,i);this._removeFromGrid(e[0]);var s=e[0].getGridPosition(),r=e[0].getSize();switch(this.cascade){case"up":case"down":default:this._isWithinBoundsY(s,r)?s.row++:s.col++,e[0].setGridPosition(s.col,s.row);break;case"left":case"right":this._isWithinBoundsX(s,r)?s.col++:s.row++,e[0].setGridPosition(s.col,s.row)}this._fixGridCollisions(s,r),this._addToGrid(e[0])}},t.prototype._cascadeGrid=function(t,i){if(t&&!i)throw new Error("Cannot cascade with only position and not dimensions");switch(this.cascade){case"up":case"down":for(var e=[0],s=1;s<=this._getMaxCol();s++)e[s]=1;for(var r=1;r<=this._getMaxRow();r++)if(void 0!=this._itemGrid[r])for(var n=1;n<=this._getMaxCol()&&void 0!=this._itemGrid[r];n++)if(!(r<e[n])&&null!=this._itemGrid[r][n]){var o=this._itemGrid[r][n];if(o.isFixed)continue;var h=o.getSize(),a=o.getGridPosition();if(a.col!=n||a.row!=r)continue;for(var l=e[n],s=1;s<h.x;s++)l=Math.max(e[n+s],l);t&&n+h.x>t.col&&n<t.col+i.x&&(r>=t.row&&r<t.row+i.y||h.y>t.row-l&&r>=t.row+i.y&&l<t.row+i.y)&&(l=Math.max(l,t.row+i.y)),l!=a.row&&(this._removeFromGrid(o),o.setGridPosition(n,l),this._addToGrid(o));for(var s=0;s<h.x;s++)e[n+s]=l+h.y}break;case"left":case"right":for(var _=[0],s=1;s<=this._getMaxRow();s++)_[s]=1;for(var r=1;r<=this._getMaxRow();r++)if(void 0!=this._itemGrid[r])for(var n=1;n<=this._getMaxCol()&&void 0!=this._itemGrid[r];n++)if(!(n<_[r])&&null!=this._itemGrid[r][n]){var o=this._itemGrid[r][n],h=o.getSize(),a=o.getGridPosition();if(a.col!=n||a.row!=r)continue;for(var l=_[r],s=1;s<h.y;s++)l=Math.max(_[r+s],l);t&&r+h.y>t.row&&r<t.row+i.y&&(n>=t.col&&n<t.col+i.x||h.x>t.col-l&&n>=t.col+i.x&&l<t.col+i.x)&&(l=Math.max(l,t.col+i.x)),l!=a.col&&(this._removeFromGrid(o),o.setGridPosition(l,r),this._addToGrid(o));for(var s=0;s<h.y;s++)_[r+s]=l+h.x}}},t.prototype._fixGridPosition=function(t,i){for(;this._hasGridCollision(t,i)||!this._isWithinBounds(t,i);){if(this._hasGridCollision(t,i))switch(this.cascade){case"up":case"down":t.row++;break;case"left":case"right":t.col++}this._isWithinBoundsY(t,i)||(t.col++,t.row=1),this._isWithinBoundsX(t,i)||(t.row++,t.col=1)}return console.log(this._hasGridCollision(t,i),this._isWithinBounds(t,i),t,i),t},t.prototype._isWithinBoundsX=function(t,i){return 0==this._maxCols||t.col+i.x-1<=this._maxCols},t.prototype._isWithinBoundsY=function(t,i){return 0==this._maxRows||t.row+i.y-1<=this._maxRows},t.prototype._isWithinBounds=function(t,i){return this._isWithinBoundsX(t,i)&&this._isWithinBoundsY(t,i)},t.prototype._addToGrid=function(t){var i=t.getGridPosition(),e=t.getSize();this._hasGridCollision(i,e)&&(this._fixGridCollisions(i,e),i=t.getGridPosition());for(var s=0;s<e.y;s++){null==this._itemGrid[i.row+s]&&(this._itemGrid[i.row+s]={});for(var r=0;r<e.x;r++)this._itemGrid[i.row+s][i.col+r]=t,this._updateSize(i.col+e.x-1,i.row+e.y-1)}},t.prototype._removeFromGrid=function(t){for(var i in this._itemGrid)for(var e in this._itemGrid[i])this._itemGrid[i][e]==t&&(this._itemGrid[i][e]=null)},t.prototype._updateSize=function(t,i){t=void 0==t?0:t,i=void 0==i?0:i,this._filterGrid();var e=Math.max(this._getMaxRow(),i);Math.max(this._getMaxCol(),t);this._renderer.setElementStyle(this._ngEl,"width","100%"),this._renderer.setElementStyle(this._ngEl,"height",e*(this.rowHeight+this.marginTop+this.marginBottom)+"px")},t.prototype._filterGrid=function(){for(var t=this._getMaxCol(),i=this._getMaxRow(),e=0,s=0,r=1;i>=r;r++)if(void 0!=this._itemGrid[r])for(var n=1;t>=n;n++)null!=this._itemGrid[r][n]&&(e=Math.max(e,n),s=Math.max(s,r));if(i!=s)for(var r=s+1;i>=r;r++)void 0!==this._itemGrid[r]&&delete this._itemGrid[r];if(t!=e)for(var r=1;s>=r;r++)if(void 0!=this._itemGrid[r])for(var n=e+1;t>=n;n++)void 0!==this._itemGrid[r][n]&&delete this._itemGrid[r][n]},t.prototype._getMaxRow=function(){return Math.max.apply(null,Object.keys(this._itemGrid))},t.prototype._getMaxCol=function(){var t=this,i=[0];return Object.keys(t._itemGrid).map(function(e){i.push(Math.max.apply(null,Object.keys(t._itemGrid[e])))}),Math.max.apply(null,i)},t.prototype._getMousePosition=function(t){(window.TouchEvent&&t instanceof TouchEvent||t.touches||t.changedTouches)&&(t=t.touches.length>0?t.touches[0]:t.changedTouches[0]);var i=this._ngEl.nativeElement.getBoundingClientRect(),e=t.clientX-i.left,s=t.clientY-i.top;return"down"==this.cascade&&(s=i.top+i.height-t.clientY),"right"==this.cascade&&(e=i.left+i.width-t.clientX),{left:e,top:s}},t.prototype._getAbsoluteMousePosition=function(t){return(window.TouchEvent&&t instanceof TouchEvent||t.touches||t.changedTouches)&&(t=t.touches.length>0?t.touches[0]:t.changedTouches[0]),{left:t.clientX,top:t.clientY}},t.prototype._getItemFromPosition=function(t){for(var i in this._items){var e=this._items[i].getDimensions(),s=this._items[i].getPosition();if(t.left>s.left+this.marginLeft&&t.left<s.left+this.marginLeft+e.width&&t.top>s.top+this.marginTop&&t.top<s.top+this.marginTop+e.height)return this._items[i]}return null},t.prototype._createPlaceholder=function(t,i){var e=this;this._loader.loadNextToLocation(r,this._ngEl.parentView._view.elementRefs[this._ngEl.boundElementIndex+1]).then(function(s){e._placeholderRef=s;var r=s.instance;r.setGridPosition(t.col,t.row),r.setSize(i.x,i.y)})},t.CONST_DEFAULT_CONFIG={margins:[10],draggable:!0,resizable:!0,max_cols:0,max_rows:0,col_width:250,row_height:250,cascade:"up",min_width:100,min_height:100,fix_to_grid:!1,auto_style:!0,auto_resize:!1},t=n([i.Directive({selector:"[ngGrid]",inputs:["config: ngGrid"],host:{"(mousedown)":"_onMouseDown($event)","(mousemove)":"_onMouseMove($event)","(mouseup)":"_onMouseUp($event)","(touchstart)":"_onMouseDown($event)","(touchmove)":"_onMouseMove($event)","(touchend)":"_onMouseUp($event)","(window:resize)":"_onResize($event)","(document:mousemove)":"_onMouseMove($event)","(document:mouseup)":"_onMouseUp($event)"},outputs:["dragStart","drag","dragStop","resizeStart","resize","resizeStop"]}),o("design:paramtypes",[i.KeyValueDiffers,i.ElementRef,i.Renderer,i.DynamicComponentLoader])],t)}(),t("NgGrid",e),s=function(){function t(t,e,s){this._ngEl=t,this._renderer=e,this._ngGrid=s,this.itemChange=new i.EventEmitter,this.dragStart=new i.EventEmitter,this.drag=new i.EventEmitter,this.dragStop=new i.EventEmitter,this.resizeStart=new i.EventEmitter,this.resize=new i.EventEmitter,this.resizeStop=new i.EventEmitter,this.gridPosition={col:1,row:1},this.gridSize={x:1,y:1},this.isFixed=!1,this.isDraggable=!0,this.isResizable=!0,this._col=1,this._row=1,this._sizex=1,this._sizey=1,this._added=!1}return Object.defineProperty(t.prototype,"config",{set:function(i){var e=t.CONST_DEFAULT_CONFIG;for(var s in e)null==i[s]&&(i[s]=e[s]);this.setConfig(i),this._added||(this._added=!0,this._ngGrid.addItem(this)),this._recalculateDimensions(),this._recalculatePosition()},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this._renderer.setElementClass(this._ngEl,"grid-item",!0),this._ngGrid.autoStyle&&this._renderer.setElementStyle(this._ngEl,"position","absolute"),this._recalculateDimensions(),this._recalculatePosition(),this._added||(this._added=!0,this._ngGrid.addItem(this))},t.prototype.canDrag=function(t){if(!this.isDraggable)return!1;if(this._dragHandle){var i=t.target.parentElement;return i.querySelector(this._dragHandle)==t.target}return!0},t.prototype.canResize=function(t){if(!this.isResizable)return null;if(this._resizeHandle){var i=t.target.parentElement;return i.querySelector(this._resizeHandle)==t.target?"both":null}var e=this._getMousePosition(t);return e.left<this._elemWidth&&e.left>this._elemWidth-this._borderSize&&e.top<this._elemHeight&&e.top>this._elemHeight-this._borderSize?"both":e.left<this._elemWidth&&e.left>this._elemWidth-this._borderSize?"width":e.top<this._elemHeight&&e.top>this._elemHeight-this._borderSize?"height":null},t.prototype.onMouseMove=function(t){if(this._ngGrid.autoStyle)if(this._ngGrid.dragEnable&&this.canDrag(t))this._renderer.setElementStyle(this._ngEl,"cursor","move");else if(this._ngGrid.resizeEnable&&!this._resizeHandle&&this.isResizable){var i=this._getMousePosition(t);i.left<this._elemWidth&&i.left>this._elemWidth-this._borderSize&&i.top<this._elemHeight&&i.top>this._elemHeight-this._borderSize?this._renderer.setElementStyle(this._ngEl,"cursor","nwse-resize"):i.left<this._elemWidth&&i.left>this._elemWidth-this._borderSize?this._renderer.setElementStyle(this._ngEl,"cursor","ew-resize"):i.top<this._elemHeight&&i.top>this._elemHeight-this._borderSize?this._renderer.setElementStyle(this._ngEl,"cursor","ns-resize"):this._renderer.setElementStyle(this._ngEl,"cursor","default")}else this._ngGrid.resizeEnable&&this.canResize(t)?this._renderer.setElementStyle(this._ngEl,"cursor","nwse-resize"):this._renderer.setElementStyle(this._ngEl,"cursor","default")},t.prototype.ngOnDestroy=function(){this._added&&this._ngGrid.removeItem(this)},t.prototype.getElement=function(){return this._ngEl},t.prototype.getDragHandle=function(){return this._dragHandle},t.prototype.getResizeHandle=function(){return this._resizeHandle},t.prototype.getDimensions=function(){return{width:this._elemWidth,height:this._elemHeight}},t.prototype.getSize=function(){return{x:this._sizex,y:this._sizey}},t.prototype.getPosition=function(){return{left:this._elemLeft,top:this._elemTop}},t.prototype.getGridPosition=function(){return{col:this._col,row:this._row}},t.prototype.setConfig=function(t){this._col=t.col,this._row=t.row,this._sizex=t.sizex,this._sizey=t.sizey,this._dragHandle=t.dragHandle,this._resizeHandle=t.resizeHandle,this._borderSize=t.borderSize,this.isDraggable=t.draggable?!0:!1,this.isResizable=t.resizable?!0:!1,this.isFixed=t.fixed?!0:!1,this._recalculatePosition(),this._recalculateDimensions()},t.prototype.setSize=function(t,i){this._sizex=t,this._sizey=i,this.gridSize={x:this._sizex,y:this._sizey},this._recalculateDimensions(),this.itemChange.emit(this.getEventOutput())},t.prototype.setGridPosition=function(t,i){this._col=t,this._row=i,this.gridPosition={col:this._col,row:this._row},this._recalculatePosition(),this.itemChange.emit(this.getEventOutput())},t.prototype.getEventOutput=function(){return{col:this._col,row:this._row,sizex:this._sizex,sizey:this._sizey,width:this._elemWidth,height:this._elemHeight,left:this._elemLeft,top:this._elemTop}},t.prototype.setPosition=function(t,i){switch(this._ngGrid.cascade){case"up":case"left":default:this._renderer.setElementStyle(this._ngEl,"left",t+"px"),this._renderer.setElementStyle(this._ngEl,"top",i+"px"),this._renderer.setElementStyle(this._ngEl,"right",null),this._renderer.setElementStyle(this._ngEl,"bottom",null);break;case"right":this._renderer.setElementStyle(this._ngEl,"right",t+"px"),this._renderer.setElementStyle(this._ngEl,"top",i+"px"),this._renderer.setElementStyle(this._ngEl,"left",null),this._renderer.setElementStyle(this._ngEl,"bottom",null);break;case"down":this._renderer.setElementStyle(this._ngEl,"left",t+"px"),this._renderer.setElementStyle(this._ngEl,"bottom",i+"px"),this._renderer.setElementStyle(this._ngEl,"right",null),this._renderer.setElementStyle(this._ngEl,"top",null)}this._elemLeft=t,this._elemTop=i},t.prototype.setDimensions=function(t,i){this._renderer.setElementStyle(this._ngEl,"width",t+"px"),this._renderer.setElementStyle(this._ngEl,"height",i+"px"),this._elemWidth=t,this._elemHeight=i},t.prototype.startMoving=function(){this._renderer.setElementClass(this._ngEl,"moving",!0);var t=window.getComputedStyle(this._ngEl.nativeElement);this._ngGrid.autoStyle&&this._renderer.setElementStyle(this._ngEl,"z-index",(parseInt(t.getPropertyValue("z-index"))+1).toString())},t.prototype.stopMoving=function(){this._renderer.setElementClass(this._ngEl,"moving",!1);var t=window.getComputedStyle(this._ngEl.nativeElement);this._ngGrid.autoStyle&&this._renderer.setElementStyle(this._ngEl,"z-index",(parseInt(t.getPropertyValue("z-index"))-1).toString())},t.prototype.recalculateSelf=function(){this._recalculatePosition(),this._recalculateDimensions()},t.prototype._recalculatePosition=function(){var t=(this._ngGrid.colWidth+this._ngGrid.marginLeft+this._ngGrid.marginRight)*(this._col-1)+this._ngGrid.marginLeft,i=(this._ngGrid.rowHeight+this._ngGrid.marginTop+this._ngGrid.marginBottom)*(this._row-1)+this._ngGrid.marginTop;this.setPosition(t,i)},t.prototype._recalculateDimensions=function(){this._sizex<this._ngGrid.minCols&&(this._sizex=this._ngGrid.minCols),this._sizey<this._ngGrid.minRows&&(this._sizey=this._ngGrid.minRows);var t=this._ngGrid.colWidth*this._sizex+(this._ngGrid.marginLeft+this._ngGrid.marginRight)*(this._sizex-1),i=this._ngGrid.rowHeight*this._sizey+(this._ngGrid.marginTop+this._ngGrid.marginBottom)*(this._sizey-1);this.setDimensions(t,i)},t.prototype._getMousePosition=function(t){if(t.originalEvent&&t.originalEvent.touches){var i=t.originalEvent;t=i.touches.length?i.touches[0]:i.changedTouches[0]}var e=this._ngEl.nativeElement.getBoundingClientRect();return{left:t.clientX-e.left,top:t.clientY-e.top}},t.CONST_DEFAULT_CONFIG={col:1,row:1,sizex:1,sizey:1,dragHandle:null,resizeHandle:null,fixed:!1,draggable:!0,resizable:!0,borderSize:15},t=n([i.Directive({selector:"[ngGridItem]",inputs:["config: ngGridItem","gridPosition: ngGridPosition","gridSize: ngGridSize"],outputs:["itemChange","dragStart","drag","dragStop","resizeStart","resize","resizeStop"]}),o("design:paramtypes",[i.ElementRef,i.Renderer,e])],t)}(),t("NgGridItem",s),r=function(){function t(t,i,e){this._ngEl=t,this._renderer=i,this._ngGrid=e}return t.prototype.ngOnInit=function(){this._renderer.setElementClass(this._ngEl,"grid-placeholder",!0),this._ngGrid.autoStyle&&this._renderer.setElementStyle(this._ngEl,"position","absolute")},t.prototype.setSize=function(t,i){this._sizex=t,this._sizey=i,this._recalculateDimensions()},t.prototype.setGridPosition=function(t,i){this._col=t,this._row=i,this._recalculatePosition()},t.prototype._setPosition=function(t,i){switch(this._ngGrid.cascade){case"up":case"left":default:this._renderer.setElementStyle(this._ngEl,"left",t+"px"),this._renderer.setElementStyle(this._ngEl,"top",i+"px"),this._renderer.setElementStyle(this._ngEl,"right",null),this._renderer.setElementStyle(this._ngEl,"bottom",null);break;case"right":this._renderer.setElementStyle(this._ngEl,"right",t+"px"),this._renderer.setElementStyle(this._ngEl,"top",i+"px"),this._renderer.setElementStyle(this._ngEl,"left",null),this._renderer.setElementStyle(this._ngEl,"bottom",null);break;case"down":this._renderer.setElementStyle(this._ngEl,"left",t+"px"),this._renderer.setElementStyle(this._ngEl,"bottom",i+"px"),this._renderer.setElementStyle(this._ngEl,"right",null),this._renderer.setElementStyle(this._ngEl,"top",null)}},t.prototype._setDimensions=function(t,i){this._renderer.setElementStyle(this._ngEl,"width",t+"px"),this._renderer.setElementStyle(this._ngEl,"height",i+"px")},t.prototype._recalculatePosition=function(){var t=(this._ngGrid.colWidth+this._ngGrid.marginLeft+this._ngGrid.marginRight)*(this._col-1)+this._ngGrid.marginLeft,i=(this._ngGrid.rowHeight+this._ngGrid.marginTop+this._ngGrid.marginBottom)*(this._row-1)+this._ngGrid.marginTop;this._setPosition(t,i)},t.prototype._recalculateDimensions=function(){var t=this._ngGrid.colWidth*this._sizex+(this._ngGrid.marginLeft+this._ngGrid.marginRight)*(this._sizex-1),i=this._ngGrid.rowHeight*this._sizey+(this._ngGrid.marginTop+this._ngGrid.marginBottom)*(this._sizey-1);this._setDimensions(t,i)},t=n([i.Component({selector:"div"}),i.View({template:""}),o("design:paramtypes",[i.ElementRef,i.Renderer,e])],t)}(),t("NgGridPlaceholder",r)}}});